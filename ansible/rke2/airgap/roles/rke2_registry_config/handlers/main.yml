---
# Handlers for RKE2 registry configuration

- name: restart rke2-server
  ansible.builtin.systemd:
    name: rke2-server
    state: restarted
  when: 
    - ansible_facts['services']['rke2-server.service'] is defined
    - ansible_facts['services']['rke2-server.service']['state'] == 'running'
  ignore_errors: yes

- name: restart rke2-agent
  ansible.builtin.systemd:
    name: rke2-agent
    state: restarted
  when: 
    - ansible_facts['services']['rke2-agent.service'] is defined
    - ansible_facts['services']['rke2-agent.service']['state'] == 'running'
  ignore_errors: yes